# MemoriaHub Environment Configuration
# Copy this file to .env and fill in the values
#
# Quick Start:
#   1. cp .env.example .env
#   2. Set your Google OAuth credentials (see OAuth section below)
#   3. Generate a JWT secret: openssl rand -base64 64
#   4. Run: docker compose -f dev.compose.yml up -d
#
# For detailed setup instructions, see: docs/SETUP.md

# =============================================================================
# Database Configuration
# =============================================================================
# Local Docker PostgreSQL (default):
#   Leave POSTGRES_HOST empty to use the Docker container
#
# Cloud PostgreSQL (AWS RDS, Azure, Supabase, Neon, etc.):
#   Set POSTGRES_HOST to your cloud server hostname
#   SSL is enabled automatically for cloud connections
#
# Or use DATABASE_URL for full control:
#   DATABASE_URL=postgresql://user:pass@host:5432/db?sslmode=require

POSTGRES_HOST=
POSTGRES_PORT=5432
POSTGRES_USER=memoriahub
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_DB=memoriahub
POSTGRES_SSL=true

# =============================================================================
# S3/MinIO Storage Configuration
# =============================================================================
# For local development with MinIO (default):
S3_ENDPOINT=http://minio:9000
S3_FORCE_PATH_STYLE=true
S3_ACCESS_KEY=memoriahub
S3_SECRET_KEY=change_me_in_production
S3_BUCKET=memoriahub

# For AWS S3, use:
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_FORCE_PATH_STYLE=false
# S3_ACCESS_KEY=your-aws-access-key
# S3_SECRET_KEY=your-aws-secret-key
# S3_BUCKET=your-bucket-name

# =============================================================================
# JWT/Authentication Configuration
# =============================================================================
# IMPORTANT: Generate a secure secret for production:
#   openssl rand -base64 64
JWT_SECRET=change_me_generate_a_secure_random_string
JWT_EXPIRES_IN=15m

# =============================================================================
# OAuth Providers
# =============================================================================
# At least one OAuth provider must be configured for login to work.
# See docs/SETUP.md for detailed setup instructions.

# Google OAuth (Recommended)
# 1. Go to: https://console.cloud.google.com/apis/credentials
# 2. Create OAuth 2.0 Client ID (Web application)
# 3. Add Authorized JavaScript origin: http://localhost:5173
# 4. Add Authorized redirect URI: http://localhost:5173/api/auth/google/callback
# 5. Copy Client ID and Client Secret below
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=

# Microsoft OAuth (Optional)
# https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
OAUTH_MICROSOFT_CLIENT_ID=
OAUTH_MICROSOFT_CLIENT_SECRET=

# GitHub OAuth (Optional)
# https://github.com/settings/developers
OAUTH_GITHUB_CLIENT_ID=
OAUTH_GITHUB_CLIENT_SECRET=

# =============================================================================
# OAuth Callback Configuration
# =============================================================================
# IMPORTANT: These URLs must match how you access the application!
#
# For development with Vite (recommended - port 5173):
OAUTH_CALLBACK_BASE_URL=http://localhost:5173/api/auth
FRONTEND_URL=http://localhost:5173
#
# For development with nginx (port 8888):
# OAUTH_CALLBACK_BASE_URL=http://localhost:8888/api/auth
# FRONTEND_URL=http://localhost:8888
#
# For production:
# OAUTH_CALLBACK_BASE_URL=https://yourdomain.com/api/auth
# FRONTEND_URL=https://yourdomain.com

# =============================================================================
# Worker Configuration
# =============================================================================
WORKER_CONCURRENCY=4

# =============================================================================
# SSL Configuration (Production Only)
# =============================================================================
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem

# =============================================================================
# Grafana Configuration
# =============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_me_in_production
GRAFANA_ROOT_URL=http://localhost:3001

# =============================================================================
# OpenTelemetry Configuration
# =============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318
